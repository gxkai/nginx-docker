(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0cb4ef52"],{"348f":function(t,e,i){},8643:function(t,e,i){t.exports=i.p+"static/img/not_add.91762a05.png"},b986:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{},[i("div",{staticClass:"bg-white"},[i("div",{staticClass:"flex justify-between px-10 py-3 border-b border-gray-400"},[t._m(0),t._v(" "),i("div",[i("el-button",{attrs:{round:"",plain:"",type:"success",size:"mini"},on:{click:function(e){return t.editEvent(t.company)}}},[t._v("修改")])],1)]),t._v(" "),i("div",{staticClass:"px-10 pt-8 pb-10"},[i("company",{staticClass:"company",attrs:{company:t.company}})],1)]),t._v(" "),i("div",{staticClass:"h-5"}),t._v(" "),i("div",{staticClass:"bg-white"},[i("div",{staticClass:"flex justify-between px-10 py-5 border-b border-gray-400"},[t._m(1),t._v(" "),i("div",[t.hasSub?i("div",{staticClass:"w-5 h-5 bg-green-400 flex justify-center items-center",on:{click:t.addEvent}},[i("i",{staticClass:"el-icon-plus text-white"})]):t._e()])]),t._v(" "),i("div",{staticClass:"px-10 pt-8 pb-10"},[t.hasSub?i("div",[0===t.subCompanyList.length?i("div",{staticClass:" flex justify-center items-center"},[t._m(2),t._v(" "),t._m(3)]):i("div",t._l(t.subCompanyList,(function(e,s){return i("div",{key:s,staticClass:"company"},[i("company",{attrs:{company:e,"is-sub":!0},on:{delete:function(i){return t.deleteEvent(e)},edit:function(i){return t.editEvent(e,!0)}}})],1)})),0)]):i("div",{staticClass:" flex justify-center items-center"},[t._m(4),t._v(" "),i("div",[i("div",[t._v("\n            灵活便捷地管理您地公司，协助您打造美好未来\n          ")]),t._v(" "),i("div",{staticClass:"h-5"}),t._v(" "),i("div",[i("el-button",{attrs:{plain:"",type:"success",round:""},on:{click:t.setSub}},[t._v("启用")])],1)])])])]),t._v(" "),i("div",{staticClass:"h-5"}),t._v(" "),i("div",{staticClass:"bg-white"},[i("div",{staticClass:"flex justify-between px-10 py-5 border-b border-gray-400"},[t._m(5),t._v(" "),i("div",[i("el-button",{attrs:{round:"",plain:"",type:"success",size:"mini"},on:{click:function(e){return t.upgradeEvent()}}},[t._v("升级版本")])],1)]),t._v(" "),i("div",{staticClass:"px-10 pt-8 pb-10 flex"},[i("div",{staticClass:"w-20"},[i("el-avatar",{attrs:{src:t.company.logo,icon:"el-icon-user-solid"}})],1),t._v(" "),i("div",{staticClass:"flex-1"},[i("div",{staticClass:"flex"},[i("div",{staticClass:"w-1/4"},[i("div",{staticClass:"text-gray-500"},[t._v("版本")]),t._v(" "),i("div",[t._v(t._s(t.company.version))])]),t._v(" "),i("div",{staticClass:"w-1/4"},[i("div",{staticClass:"text-gray-500"},[t._v("有效期")]),t._v(" "),i("div",[t._v(t._s(t.company.version))])])])])])]),t._v(" "),i("vxe-modal",{attrs:{width:"600","show-header":!0,title:"客户详情","show-footer":!0},model:{value:t.editing,callback:function(e){t.editing=e},expression:"editing"}},[[i("el-form",{ref:"form",attrs:{"label-width":"80px","label-position":"top",model:t.companyForm}},[i("div",{staticClass:"px-8"},[i("el-upload",{ref:"upload",attrs:{action:"string",accept:"image/jpeg,image/png,image/jpg","http-request":t.uploadEvent,"show-file-list":!1}},[i("el-avatar",{attrs:{src:t.companyForm.logo,icon:"el-icon-user-solid"}})],1),t._v(" "),i("div",{staticClass:"flex items-center"},[i("el-form-item",{staticClass:"flex-1",attrs:{label:"公司名称",prop:"title",rules:[{required:!0,message:"请输入公司名称",trigger:"blur"}]}},[i("el-input",{model:{value:t.companyForm.title,callback:function(e){t.$set(t.companyForm,"title",e)},expression:"companyForm.title"}})],1),t._v(" "),i("div",{staticClass:"w-2"}),t._v(" "),i("el-form-item",{staticClass:"flex-1",attrs:{label:"公司电话",prop:"tel",rules:[{required:!0,message:"请输入公司电话",trigger:"blur"}]}},[i("el-input",{model:{value:t.companyForm.tel,callback:function(e){t.$set(t.companyForm,"tel",e)},expression:"companyForm.tel"}})],1)],1),t._v(" "),i("div",{staticClass:"flex items-center"},[i("el-form-item",{staticClass:"flex-1",attrs:{label:"公司网址",prop:"website",rules:[{required:!0,message:"请输入公司网址",trigger:"blur"}]}},[i("el-input",{model:{value:t.companyForm.website,callback:function(e){t.$set(t.companyForm,"website",e)},expression:"companyForm.website"}})],1),t._v(" "),i("div",{staticClass:"w-2"}),t._v(" "),i("el-form-item",{staticClass:"flex-1",attrs:{label:"公司邮箱",prop:"email",rules:[{required:!0,message:"请输入公司邮箱",trigger:"blur"}]}},[i("el-input",{model:{value:t.companyForm.email,callback:function(e){t.$set(t.companyForm,"email",e)},expression:"companyForm.email"}})],1)],1),t._v(" "),i("el-form-item",{staticClass:"flex-1",attrs:{label:"公司地址",prop:"address",rules:[{required:!0,message:"请输入公司网址",trigger:"blur"}]}},[i("el-input",{model:{value:t.companyForm.address,callback:function(e){t.$set(t.companyForm,"address",e)},expression:"companyForm.address"}})],1),t._v(" "),i("el-form-item",{staticClass:"flex-1",attrs:{label:"公司描述",prop:"description",rules:[{required:!0,message:"请输入公司描述",trigger:"blur"}]}},[i("el-input",{model:{value:t.companyForm.description,callback:function(e){t.$set(t.companyForm,"description",e)},expression:"companyForm.description"}})],1)],1)])],t._v(" "),i("template",{slot:"footer"},[i("div",{staticClass:"flex justify-end"},[i("el-button",{attrs:{round:""},on:{click:t.cancelEdit}},[t._v("取消")]),t._v(" "),i("div",{staticClass:"w-2"}),t._v(" "),i("el-button",{attrs:{type:"success",round:"",loading:t.loadingForm.confirmLoading},on:{click:function(e){return t.confirmEdit(t.companyForm)}}},[t._v("确认")])],1)])],2)],1)},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("span",[t._v("\n          公司信息\n        ")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("span",[t._v("\n          分公司\n        ")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"p-2"},[s("img",{staticClass:"w-30 h-30",attrs:{src:i("8643")}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",[t._v("\n              您暂未添加分公司\n            ")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"p-2"},[s("img",{staticClass:"w-30 h-30",attrs:{src:i("8643")}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("span",[t._v("\n          版本信息\n        ")])])}],a=(i("96cf"),i("3b8d")),r=i("db72"),c=i("2f62"),o=i("ed08"),l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"flex"},[i("div",{staticClass:"w-20"},[i("el-avatar",{attrs:{src:t.company.logo,icon:"el-icon-user-solid"}})],1),t._v(" "),i("div",{staticClass:"flex-1"},[i("div",{staticClass:"flex"},[i("div",{staticClass:"flex-1"},[i("div",{staticClass:"text-gray-500"},[t._v("公司名称")]),t._v(" "),i("div",[t._v(t._s(t.company.title))])]),t._v(" "),i("div",{staticClass:"flex-1"},[i("div",{staticClass:"text-gray-500"},[t._v("公司电话")]),t._v(" "),i("div",[t._v(t._s(t.company.tel))])]),t._v(" "),i("div",{staticClass:"flex-1"},[i("div",{staticClass:"text-gray-500"},[t._v("公司网址")]),t._v(" "),i("div",[t._v(t._s(t.company.website))])]),t._v(" "),i("div",{staticClass:"flex-1"},[i("div",{staticClass:"text-gray-500"},[t._v("公司地址")]),t._v(" "),i("div",[t._v(t._s(t.company.address))])])]),t._v(" "),i("div",{staticClass:"h-5"}),t._v(" "),i("div",{staticClass:"flex"},[i("div",{staticClass:"flex-1"},[i("div",{staticClass:"text-gray-500"},[t._v("公司邮箱")]),t._v(" "),i("div",[t._v(t._s(t.company.email))])]),t._v(" "),i("div",{staticClass:"flex-3"},[i("div",{staticClass:"text-gray-500"},[t._v("公司描述")]),t._v(" "),i("div",[t._v(t._s(t.company.description))])])]),t._v(" "),t.isSub?i("div",[i("div",{staticClass:"h-5"}),t._v(" "),i("div",{staticClass:"flex"},[i("div",{staticClass:"flex"},[i("el-button",{attrs:{plain:"",round:"",size:"mini"},on:{click:function(e){return t.$emit("delete")}}},[t._v("删除")]),t._v(" "),i("el-button",{attrs:{plain:"",round:"",size:"mini",type:"success"},on:{click:function(e){return t.$emit("edit")}}},[t._v("修改")])],1)])]):t._e()])])},u=[],d={name:"Company",components:{},mixins:[],extends:{},filters:{},provide:{},inject:[],props:{company:{type:Object,required:!0},isSub:{type:Boolean,default:!1}},computed:{},watch:{},data:function(){return{}},beforeRouteEnter:function(t,e,i){i((function(t){}))},beforeRouteUpdate:function(t,e,i){i()},beforeRouteLeave:function(t,e,i){i()},beforeCreate:function(){},created:function(){},beforeMount:function(){},mounted:function(){},beforeUpdate:function(){},updated:function(){},activated:function(){},deactivated:function(){},beforeDestroy:function(){},destroyed:function(){},methods:{}},v=d,p=i("2877"),m=Object(p["a"])(v,l,u,!1,null,"4a8dd5b4",null),f=m.exports,b={title:"",email:"",address:"",tel:"",description:"",website:""},_={name:"SettingsSettings",components:{Company:f},mixins:[],extends:{},filters:{},provide:{},inject:[],props:{},computed:Object(r["a"])({},Object(c["b"])(["company"])),watch:{},data:function(){return{editing:!1,companyForm:{},loadingForm:{confirmLoading:!1},isEdit:!0,isSubEdit:!1,hasSub:!1,subCompanyList:[]}},beforeRouteEnter:function(t,e,i){i((function(t){}))},beforeRouteUpdate:function(t,e,i){i()},beforeRouteLeave:function(t,e,i){i()},beforeCreate:function(){},created:function(){this.findSubCompanyList()},beforeMount:function(){},mounted:function(){},beforeUpdate:function(){},updated:function(){},activated:function(){},deactivated:function(){},beforeDestroy:function(){},destroyed:function(){},methods:{findSubCompanyList:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$request.get("/api/sub");case 2:e=t.sent,i=e.data,this.subCompanyList=i,this.subCompanyList.length>0&&(this.hasSub=!0);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),editEvent:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.isSubEdit=e,this.isEdit=!0,this.companyForm=Object.assign({},t),this.editing=!0},deleteEvent:function(t){var e=this;this.$confirm("确定要删除分公司么","提示").then(Object(a["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,e.$request.delete("/api/company/".concat(t.id));case 2:e.findSubCompanyList(),e.$message.success("删除成功");case 4:case"end":return i.stop()}}),i)})))).catch((function(){e.$message.error("取消删除")}))},addEvent:function(){this.isEdit=!1,this.companyForm=b,this.editing=!0},cancelEdit:function(){this.editing=!1},confirmEdit:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$validate(this);case 2:if(t.prev=2,this.loadingForm.confirmLoading=!0,!this.isEdit){t.next=11;break}return i=Object(o["b"])(e,["updated_at","created_at"]),t.next=8,this.$request.patch("/api/company/".concat(i.id),i);case 8:this.isSubEdit?this.findSubCompanyList():this.$store.commit("user/SET_COMPANY",i),t.next=14;break;case 11:return t.next=13,this.$request.post("/api/sub",e);case 13:this.findSubCompanyList();case 14:this.editing=!1;case 15:return t.prev=15,this.loadingForm.confirmLoading=!1,t.finish(15);case 18:case"end":return t.stop()}}),t,this,[[2,,15,18]])})));function e(e){return t.apply(this,arguments)}return e}(),upgradeEvent:function(){},setSub:function(){this.hasSub=!0},uploadEvent:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){var i,s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=new FormData,i.append("file",e.file),t.next=4,this.$request.post("/api/upload",i);case 4:s=t.sent,n=s.data,this.$set(this.companyForm,"logo","".concat("http://192.168.1.253:82","/").concat(n.path));case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}},y=_,h=(i("f8b7"),Object(p["a"])(y,s,n,!1,null,"1cf03687",null));e["default"]=h.exports},f8b7:function(t,e,i){"use strict";var s=i("348f"),n=i.n(s);n.a}}]);