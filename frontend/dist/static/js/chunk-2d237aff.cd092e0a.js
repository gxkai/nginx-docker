(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d237aff"],{fbd1:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"h-full"},[a("div",{staticClass:"bg-white w-full mt-5 px-10 py-10"},[a("div",{staticClass:"flex justify-between w-full"},[a("div",[a("el-button",{attrs:{type:"success",round:"",icon:"el-icon-plus"},on:{click:e.addModel}},[e._v("添加新闻")])],1),e._v(" "),a("div",{staticClass:"flex"},[a("el-input",{attrs:{placeholder:"请输入标题名称"},model:{value:e.params.title,callback:function(t){e.$set(e.params,"title",t)},expression:"params.title"}}),e._v(" "),a("div",{staticClass:"w-2"}),e._v(" "),a("el-button",{attrs:{type:"success",round:""},on:{click:e.searchEvent}},[e._v("搜索")]),e._v(" "),a("div",{staticClass:"w-2"}),e._v(" "),a("el-select",{attrs:{placeholder:"请选择状态"},model:{value:e.params.flag,callback:function(t){e.$set(e.params,"flag",t)},expression:"params.flag"}},[a("el-option",{attrs:{value:0,label:"不显示"}}),e._v(" "),a("el-option",{attrs:{value:1,label:"显示"}})],1),e._v(" "),a("div",{staticClass:"w-2"}),e._v(" "),a("el-button",{attrs:{size:"small",round:""},on:{click:e.exportCsvEvent}},[e._v("导出")])],1)]),e._v(" "),a("vxe-table",{ref:"xTable",staticClass:"mt-8",attrs:{border:"",resizable:"",loading:e.loading,"start-index":(e.tablePage.currentPage-1)*e.tablePage.pageSize,"pager-config":e.tablePage,data:e.tableData}},[a("vxe-table-column",{attrs:{field:"title",title:"姓名"}}),e._v(" "),a("vxe-table-column",{attrs:{title:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[n.flag?a("div",[e._v("已发布")]):a("div",{staticClass:"text-green-500"},[e._v("未发布")])]}}])}),e._v(" "),a("vxe-table-column",{attrs:{field:"created_at",title:"发布时间"}}),e._v(" "),a("vxe-table-column",{attrs:{title:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("div",[a("el-button",{attrs:{size:"small",circle:"",icon:"icon-shanchu"},on:{click:function(t){return e.deleteEvent(n)}}}),e._v(" "),a("el-button",{attrs:{circle:"",type:"success",plain:"",icon:"el-icon-edit"},on:{click:function(t){return e.editEvent(n)}}})],1)]}}])})],1),e._v(" "),a("vxe-pager",{attrs:{loading:e.loading,"current-page":e.tablePage.currentPage,"page-size":e.tablePage.pageSize,total:e.tablePage.total,layouts:["PrevPage","JumpNumber","NextPage","FullJump","Sizes","Total"]},on:{"page-change":e.handlePageChange}})],1)])},i=[],r=(a("96cf"),a("3b8d")),s={name:"SettingsArticleList",components:{},mixins:[],extends:{},filters:{},provide:{},inject:[],props:{},computed:{},watch:{},data:function(){return{loading:!1,tablePage:{total:0,currentPage:1,pageSize:10},tableData:[],params:{title:"",flag:null}}},beforeRouteEnter:function(e,t,a){a((function(e){}))},beforeRouteUpdate:function(e,t,a){a()},beforeRouteLeave:function(e,t,a){a()},beforeCreate:function(){},created:function(){},beforeMount:function(){},mounted:function(){this.findList()},beforeUpdate:function(){},updated:function(){},activated:function(){},deactivated:function(){},beforeDestroy:function(){},destroyed:function(){},methods:{findList:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,a,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.loading=!0,e.next=4,this.$request.get("/api/article",{params:{page:this.tablePage.currentPage,limit:this.tablePage.pageSize}});case 4:t=e.sent,a=t.data,n=a.total,i=a.data,this.tableData=i,this.tablePage.total=n;case 10:return e.prev=10,this.loading=!1,e.finish(10);case 13:case"end":return e.stop()}}),e,this,[[0,,10,13]])})));function t(){return e.apply(this,arguments)}return t}(),searchEvent:function(){this.tablePage.currentPage=1,this.findList()},handlePageChange:function(e){var t=e.currentPage,a=e.pageSize;this.tablePage.currentPage=t,this.tablePage.pageSize=a,this.findList()},deleteEvent:function(e){var t=this;this.$confirm("您确定要删除吗？","提示").then(Object(r["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,t.$loading(),a.next=4,t.$request.delete("/api/article/".concat(e.id));case 4:t.$message.success("删除成功"),t.findList(),a.next=11;break;case 8:a.prev=8,a.t0=a["catch"](0),t.$message.success("删除失败");case 11:return a.prev=11,t.$loading().close(),a.finish(11);case 14:case"end":return a.stop()}}),a,null,[[0,8,11,14]])}))))},editEvent:function(e){this.$router.push("/settings/article/edit/".concat(e.id))},exportCsvEvent:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.loading=!0,e.next=4,this.$request.get("/api/article",{params:this.params});case 4:t=e.sent,a=t.data,this.$refs.xTable.exportCsv({filename:"新闻公告.csv",original:!0,isHeader:!0,data:a});case 7:return e.prev=7,this.loading=!1,e.finish(7);case 10:case"end":return e.stop()}}),e,this,[[0,,7,10]])})));function t(){return e.apply(this,arguments)}return t}(),addModel:function(){this.$router.push("/settings/article/add")}}},l=s,c=a("2877"),o=Object(c["a"])(l,n,i,!1,null,"036f62e5",null);t["default"]=o.exports}}]);