(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2163d5"],{c22b:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"py-8"},[i("div",{staticClass:"flex flex-wrap  align--center items-center",attrs:{loading:t.loading}},[t._l(t.roles,(function(e,s){return i("div",{key:s,staticClass:" w-1/4 p-5 h-96"},[i("div",{staticClass:"flex flex-col items-center border p-4 h-88"},[i("div",{staticClass:"self-end h-20"},[i("div",{staticClass:"flex self-end items-center"},[i("el-button",{attrs:{type:"text"},on:{click:function(i){return t.editModel(e.id)}}},[i("xy-icon",{attrs:{type:"config--shixin"}}),t._v("权限配置")],1)],1)]),t._v(" "),i("div",{staticClass:"bg-green-500 w-20 h-20 flex justify-center items-center rounded-full"},[i("div",{staticClass:"truncate text-mini text-white"},[t._v("\n            "+t._s(e.title)+"\n          ")])]),t._v(" "),i("div",{staticClass:"mt-4"},[t._v("\n          已配置"),i("span",{staticClass:"text-green-500"},[t._v(t._s(e.count))]),t._v("个账号\n        ")]),t._v(" "),i("div",{staticClass:"mt-5 w-full text-gray-500"},[t._v("\n          管理员具有平台全部使用功能，请谨慎配置\n        ")]),t._v(" "),i("div",{staticClass:"w-full flex text-green-500 mt-2"},[i("el-button",{attrs:{type:"text"},on:{click:function(i){return t.editModel(e.id)}}},[t._v("\n            查看权限\n          ")])],1)])])})),t._v(" "),i("div",{staticClass:" w-1/4 p-5 h-96"},[i("div",{staticClass:"flex flex-col items-center border p-4 h-88"},[i("div",{staticClass:"self-end h-20"}),t._v(" "),t._m(0),t._v(" "),i("div",{staticClass:"mt-16 w-full text-gray-500"},[t._v("\n          配置自定义角色，灵活管理平台权限\n        ")]),t._v(" "),i("div",{staticClass:"mt-4"},[i("el-button",{on:{click:t.create}},[t._v("新增角色")])],1)])])],2),t._v(" "),i("vxe-modal",{attrs:{width:"600","show-header":!0,title:t.actionTip[t.action]+"角色","show-footer":!0},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[[i("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px","label-position":"top"}},[i("div",{},[i("div",{staticClass:"flex"},[i("el-form-item",{staticClass:"w-1/2",attrs:{label:"角色名称",prop:"title",rules:[{required:!0,message:"角色名称不能为空",trigger:"blur"}]}},[i("el-input",{model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),i("div",{staticClass:"w-2"}),t._v(" "),i("el-form-item",{staticClass:"w-1/2",attrs:{label:"角色简称",prop:"name",rules:[{required:!0,message:"角色简称不能为空",trigger:"blur"}]}},[i("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),t._v(" "),i("div",{},[i("el-form-item",{attrs:{label:"权限配置",prop:"permission_ids",rules:[{required:!0,message:"权限配置不能为空",trigger:"blur"}]}},[i("el-checkbox-group",{model:{value:t.form.permission_ids,callback:function(e){t.$set(t.form,"permission_ids",e)},expression:"form.permission_ids"}},t._l(t.permissions,(function(e){return i("el-checkbox",{key:e.id,attrs:{label:e.name,value:e.id}},[t._v(t._s(e.title))])})),1)],1)],1)])])],t._v(" "),i("template",{slot:"footer"},[i("div",{staticClass:"flex justify-end"},[i("el-button",{attrs:{round:""},on:{click:t.cancel}},[t._v("取消")]),t._v(" "),i("div",{staticClass:"w-2"}),t._v(" "),i("el-button",{attrs:{type:"success",round:""},on:{click:t.confirm}},[t._v("确认")])],1)])],2)],1)},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bg-green-500 w-20 h-20 flex justify-center items-center rounded-full"},[i("div",{staticClass:"truncate text-mini text-white"},[t._v("\n            +自定义\n          ")])])}],r=(i("ac6a"),i("456d"),i("96cf"),i("3b8d")),a={name:"Role",components:{},mixins:[],extends:{},filters:{},provide:{},inject:[],props:{},computed:{},watch:{},data:function(){return{roles:[],loading:!1,editId:0,modal:!1,action:"add",actionTip:{add:"添加",edit:"修改"},permissions:[],form:{title:"",name:"",permission_ids:[]}}},created:function(){this.findList(),this.findPermissionList()},methods:{findList:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.loading=!0,t.next=4,this.$request.get("/api/role");case 4:e=t.sent,i=e.data,this.roles=i;case 7:return t.prev=7,this.loading=!1,t.finish(7);case 10:case"end":return t.stop()}}),t,this,[[0,,7,10]])})));function e(){return t.apply(this,arguments)}return e}(),editModel:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.action="edit",t.next=3,this.$request.get("/api/role/".concat(e));case 3:i=t.sent,s=i.data,this.form=_.pick(s,Object.keys(this.form)),this.$set(this.form,"permission_ids",s.permission),this.editId=e,this.modal=!0;case 9:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),create:function(){this.modal=!0,this.action="add"},cancel:function(){this.modal=!1,this.$refs["form"].resetFields()},confirm:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,"edit"!==this.action){t.next=6;break}return t.next=4,this.$request.patch("/api/role/".concat(this.editId),this.forms);case 4:t.next=8;break;case 6:return t.next=8,this.$request.post("/api/role",this.form);case 8:return t.prev=8,this.$message({message:this.actionTip[this.action]+"成功！",type:"success"}),this.findList(),this.cancel(),t.finish(8);case 13:case"end":return t.stop()}}),t,this,[[0,,8,13]])})));function e(){return t.apply(this,arguments)}return e}(),findPermissionList:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$request.get("/api/permission");case 2:e=t.sent,i=e.data,this.permissions=i.data;case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},o=a,c=i("2877"),l=Object(c["a"])(o,s,n,!1,null,"54f97ad8",null);e["default"]=l.exports}}]);